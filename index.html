<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Will you be my Valentine?</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background: linear-gradient(135deg,#ffd1dc,#ffc0cb,#e6b7ff);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  overflow:hidden;
}

/* CARD */
.card{
  background:rgba(255,255,255,0.9);
  backdrop-filter: blur(10px);
  border-radius:30px;
  padding:30px 20px;
  max-width:420px;
  width:90%;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,0.2);
  border:4px solid #f9a8d4;
}

img{
  width:220px;
  max-width:80%;
  transition:transform 0.4s;
}

h1{
  font-size:2.2rem;
  margin:10px 0;
  background: linear-gradient(to right,#ec4899,#ef4444);
  -webkit-background-clip:text;
  color:transparent;
}

h2{
  font-size:3rem;
  color:#ef4444;
  margin:5px 0 20px;
  animation:pulse 1.5s infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.05);}
}

.message{
  color:#555;
  font-style:italic;
  margin-bottom:15px;
  min-height:24px;
}

/* BUTTONS */
.buttons{
  display:flex;
  gap:15px;
  justify-content:center;
  flex-wrap:wrap;
}

button{
  border:none;
  border-radius:30px;
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
}

#yesBtn{
  background:linear-gradient(to right,#22c55e,#16a34a);
  color:white;
  padding:14px 34px;
  font-size:1.4rem;
  box-shadow:0 8px 18px rgba(0,0,0,0.2);
}

#noBtn{
  background:linear-gradient(to right,#9ca3af,#6b7280);
  color:white;
  padding:12px 26px;
  font-size:1.1rem;
  position:relative;
}

button:hover{
  transform:scale(1.05);
}

/* hearts floating */
.heart{
  position:absolute;
  font-size:50px;
  opacity:0.15;
  animation: float 4s infinite ease-in-out;
}

@keyframes float{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-25px);}
}

/* final screen */
#finalScreen{
  display:none;
  text-align:center;
}

#finalScreen h1{
  font-size:3rem;
  color:#ef4444;
}

</style>
</head>
<body>

<div class="card" id="mainCard">

  <img id="gif" src="https://media.tenor.com/YiMNm2QVdMoAAAAi/bubu-dudu-sseeyall.gif" loading="eager" decoding="sync" fetchpriority="high">

  <h1>Will you be my</h1>
  <h2>VALENTINE? 💕</h2>

  <div class="message" id="message"></div>

  <div class="buttons">
    <button id="yesBtn">Yes!</button>
    <button id="noBtn">No</button>
  </div>

  <div style="margin-top:15px;opacity:0.6;font-size:26px">
    💕 💖 💗 💓 💝
  </div>
</div>

<!-- Final Screen -->
<div id="finalScreen">
  <img id="finalGif" src="https://media.tenor.com/ujq2yTt6EuoAAAAi/crystal-amaru.gif" width="250" loading="eager" decoding="sync">
  <h1>Yayyy! 🥰</h1>
  <p style="font-size:1.5rem;color:#c026d3">Je savais que tu dirais oui ! 💕 <br>Je t'aime ma baby</p>
 
</div>

<!-- floating hearts -->
<div class="heart" style="top:10%;left:10%;">❤️</div>
<div class="heart" style="top:20%;right:15%;animation-delay:1s;">💕</div>
<div class="heart" style="bottom:15%;left:20%;animation-delay:2s;">💖</div>
<div class="heart" style="bottom:25%;right:10%;animation-delay:3s;">💗</div>

<script>
let noClickCount = 0;

const gif = document.getElementById("gif");
const message = document.getElementById("message");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const finalScreen = document.getElementById("finalScreen");
const mainCard = document.getElementById("mainCard");
const finalGif = document.getElementById("finalGif");
const progressiveMessages = [
  "S'il te plait...",
  "Allez, juste un petit oui...",
  "Tu me brises le coeur...",
  "Je suis desespere...",
  "Pourquoi ? Tu ne veux pas ? Tu ne m'aimes pas ?",
  "Je suis tellement triste... Je ne pensais pas que tu dirais non...",
  "Oh petite soeur ! depuis que je te supplie ?",
  "Le tour ci tu vas seulement accepter sinon...",
];

const sadGifs = [
  'https://media1.tenor.com/m/KUGbLzdDd9YAAAAC/bubu-dudu.gif',
  'https://media.tenor.com/qqRoBpnjOrIAAAAi/tkthao219-bubududu.gif',
  'https://media.tenor.com/kt5xf6ob9_QAAAAj/mimibubu.gif',
  'https://media.tenor.com/_JUsn71bjR0AAAAj/lonzo-ball.gif',
  'https://media.tenor.com/sWXhCC4A2woAAAAi/bubu-bubu-dudu.gif',
  'https://media.tenor.com/8vJ4ch5LTTAAAAAi/bubu-dudu-sseeyall.gif',
  'https://media.tenor.com/P7LyTvDSvDIAAAAi/milk-and-mocha.gif',
  'https://media.tenor.com/5zj52Oh-SBoAAAAi/%E5%BB%A2%E7%89%A9%E5%85%94%E5%AD%90-%E5%BB%A2%E5%85%94.gif'
];

// Preload pour minimiser la latence reseau au changement de GIF.
const preloadedImages = [];
function preloadImages(urls) {
  urls.forEach((url) => {
    const img = new Image();
    img.decoding = "sync";
    img.src = url;
    preloadedImages.push(img);
  });
}

preloadImages([gif.src, finalGif.src, ...sadGifs]);

function moveNoButton() {
  const moveX = Math.floor(Math.random() * 141) - 70; // -70 a +70
  const moveY = Math.floor(Math.random() * 41) - 20;  // -20 a +20
  noBtn.style.left = `${moveX}px`;
  noBtn.style.top = `${moveY}px`;
}

function isDesktopPointer() {
  return window.matchMedia("(hover: hover) and (pointer: fine)").matches;
}

function advanceNoFlow() {
  if (noBtn.style.display === "none") return;

  // Le mouvement se fait d'abord, puis le message evolue.
  moveNoButton();
  noClickCount++;
  const messageIndex = Math.min(noClickCount - 1, progressiveMessages.length - 1);
  const gifIndex = Math.min(noClickCount - 1, sadGifs.length - 1);
  message.textContent = progressiveMessages[messageIndex];
  gif.src = sadGifs[gifIndex];

  if (noClickCount >= progressiveMessages.length) {
    noBtn.style.display = "none";
  }
}

noBtn.addEventListener("mouseenter", () => {
  if (isDesktopPointer()) advanceNoFlow();
});

noBtn.onclick = () => {
  // Sur PC, NO n'est pas cense etre cliquable.
  if (isDesktopPointer()) return;
  advanceNoFlow();
};

yesBtn.onclick = () => {
  mainCard.style.display = "none";
  finalScreen.style.display = "block";
};
</script>

</body>
</html>
